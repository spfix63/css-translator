<html>

<head>
<meta http-equiv=Content-Type content="text/html; charset=windows-1257"></head>

<h1 align=center>TMET2114 Treèias praktinis darbas</h1>

<h3 align=center>Kursas: Transliavimo metodai, 2012/13 m.m. rudens sem.</h3>

<TABLE cellPadding="4" border="1">
<TR><TD><B><I>Variantas</I></B>:</TD><TD>316</TD></TR>
<TR><TD><B><I>Atliko</I></B>:</TD><TD>Jonas Inèius</TD></TR>
<TR><TD><B><I>Pradëtas</I></B>:</TD><TD>2012-11-18</TD></TR>
<TR><TD><B><I>Baigtas</I></B>:</TD><TD>2012-11-25</TD></TR>
<TR><TD><B><I>Sugaiðta</I></B>:</TD><TD>25 h</TD></TR>
</TABLE>

<h3>Uþdavinio formulavimo analizë:</h3>

<p><strong>Uþduotis:</strong></p>
<p>
Transliatoriaus raðymas. Nagrinëjama kalba: Cascading Style Sheets su pridëtom aritmetinëm iðraiðkom. 
Transliuojam á: C++.
</p>

<h3>Atlikto darbo palyginimas su ankstesniu ðio darbo atlikimu</h3>
<p>
Ankstesnis darbo atlikimas nebuvo pateiktas.
</p>

<h3>Vartotojo vadovas:</h3>
<h4>Paleidimas:</h4>
<p>
Programà paruoðti gnu make árankiu. 
Programos paleidimo komanda atrodo ðitaip:
"[programos_vardas] [ávesties_failo_vardas] [klasiø_apibrëþimø_iðvesties_failo_vardas] [klasiø_implementacijø_iðvesties_failo_vardas]".
Kabuèiø ir [] neraðyti. Pvz: ./uzd3 Sample38.trm CppOutput.h CppOutput.cpp.
Jeigu programos darbas nepavyksta, iðvedamas koks nors klaidos praneðimas. Jeigu pavyksta, praneðama apie sëkmingà darbo pabaigà.
</p>
<h4>Transliatoriaus apraðymas:</h4>
<p>
Transliuoja pavyzdinæ kalbà á C++. Pavyzdinë kalba savo forma primena CSS, t.y. 
selektorius parenka elementus, kuriem galioja bloko viduje apraðyti priskyrimai.
Selektoriai gali bûti ávairûs. Ðá savybë suteikia transliatoriui sudëtingumo.
C++ iðvestis susideda ið Tëvinës elemento klasës, kuri turi virtualø metodà applyCss,
bei jos klasiø-vaikø, kurie generuojami analizuojant CSS ávestá. Atpaþinus naujà 
elementà, jam sukuriama klasë ir apraðomas paveldëtas metodas applyCss, kurio viduje
atliekami priskyrimai buvæ CSS bloko viduje. Klasiø, id, pseudo ir atributø selektoriai
ágyvendinami naudojantys if sakiniais, lyginant atitinkamà elemento laukà su duotàja
reikðme. Ir tik tais atvejais, kai jos sutampa, ávyksta minëti priskyrimai. Atributai
naudojami CSS priskyrimuose C++ iðreiðkiami nariais kintamaisiais, kurie taip pat 
generuojami nagrinëjant ávesties failà. Sutransliuotos klasës turës lygiai tiek
skirtingø nariø kintamøjø, kiek jø elementam atributø bûvo panaudota Css taisyklëse. 
Taisyklës, kurios nenurodo konkretaus elemento, pritaikomos visiem elementam. Jos
kaupiamos iki vykdymo pabaigos, ir sutransliuojamos paskutinës. Tai sukelia ðalutiná
efektà, dël kurio tokios taisyklës turi didþiausià prioritetà.
</p>
<p>
Pastabos: transliatorius pasirûpina, kad viena elementø turëtø tik vienà jà atitinkanèià
klasæ ir, kad vienoje klasëje nesikartotø kintamøjø vardai.
</p>


<h3>Programuotojo vadovas:</h3>
<h4>Apibendrinimas:</h4>
<p>
Transliuoja pavyzdinæ kalbà á C++. Pavyzdinë kalba savo forma primena CSS, t.y. 
selektorius parenka elementus, kuriem galioja bloko viduje apraðyti priskyrimai.
Programa susideda ið lex generuoto skanerio, yacc generuoto parserio ir C kalba
apraðyto C++ kodo generatoriaus. Yacc parseriui papildyti yra paraðyti selektoriaus,
bloko ir atributo moduliai. Parseriui atpaþástant duomenys, ðios struktûros yra jais
uþpildomos ir perduodamos á kodo generatoriø. Kodo generatorius susideda ið klasës, 
metodo ir kintamojo generavimo moduliø. Gali generuoti C++ klasiø apraðus ir 
implementacijas. Palaiko iki vienos tëvinës klasës. Skiria private, protected 
ir public dalis. Supranta metodo savokà. Metodui galima parinkti tipà, ir 
argumentø sàraðà. Supranta kintamojo sàvokà. Galima kurti kintamuosius suteikiant 
jiem duomenø tipà ir pavadinimà. Klasës apraðe gali bûti metodai ir kintamieji. 
Pagal klasës apraðà sugeneruoja implementacijà. Taip pat generuoja metodø 
implementacijas ir leidþia á juos pridëti papildomo kodo.
</p>

<h4>Tolesnis plëtimas:</h4>
<p>
Tolesná plëtimà reikëtø pradëti svarstymais apie naudojamos kalbos keitimà. Programa veikia
su pavyzdiniu kalbos failu, taèiau visas funkcionalumos neiðtestuotas. Be to, autoriaus tvarkymasis
su C stiliaus eilutëmis, nenaudojant papildomø moduliø atminties tvarkymui, paliko galybæ vietos 
atminties nutekëjimams ir sunkiai atsekamoms segmentation fault klaidom. Perëjimas prie kitos kalbos 
leistø perraðyti esamà kodà priemonëmis, kurios galbût yra atsparesnës panaðaus pobûdþio klaidoms.
Tai galimai leistø panaikinti panaðaus tipo tiksinèias laiko bombas. Koks bebûtø sprendimas, yra
nemaþai kitø vietø, kurioms reikia skirti dëmesá. Esamas C++ generatorius yra platesnis, negu 
reikalauja uþduotis, taèiau visvien smarkiai neiðbaigtas. Jam reikëtø geresnio metodø generavimo,
static, ir pure virtual palaikymo. Geresniam metodø generavimui reikëtø konstrukcijø apraðanèiø
if sakinius ir for ciklus. Taip pat konstrukcijos apraðanèios priskyrimà ir kitø metodø kvietimus.
Galima bûtø pridëti konstruktoriø ir destruktoriø generavimà. Pradþiai to turëtø uþtekti.
Reikëtø patobulinti kalbos apraðymà ir jos interpretacijà. Galima bûtø palaikyti daugiau tikrojo
CSS funkcionalumo. Analizavimo dalyje reikëtø ágyvendinti elementø paveldëjimo tikrinimà.
Pasiekus ðiuos dalykus, galima bûtø ieðkoti ar kurti narðyklæ, kuriai ðitoks funkcionalumas bûtø
tinkamas.
</p>
<p>
Pastabos pletëjui: Visa funkcijom perduodama atmintis yra kopijuojama. Ir visos ið funkcijø gràþinamos 
atminties atlaisvinimas yra kvietëjo atsakomybë. Taip pat, nemaþa dalis tø kopijø nëra reikalingos 
ir daþnai nëra pagrástos. Reikëtø pagerinti atminties valdymà programoje.
</p>

</body>

</html>
